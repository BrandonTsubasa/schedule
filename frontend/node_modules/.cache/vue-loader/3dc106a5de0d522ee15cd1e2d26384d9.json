{"remainingRequest":"/Users/tsubasa/project/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tsubasa/project/frontend/src/views/TaskCalendar.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/tsubasa/project/frontend/src/views/TaskCalendar.vue","mtime":1625164970189},{"path":"/Users/tsubasa/project/frontend/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/tsubasa/project/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/tsubasa/project/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tsubasa/project/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojZGlzcGxheSB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwp9Cg=="},{"version":3,"sources":["TaskCalendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA","file":"TaskCalendar.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <div id=\"display\">\n      <v-container>\n        <v-sheet\n        tile\n        height=\"6vh\"\n        color=\"grey lighten-3\"\n        class=\"d-flex align-center\"\n        >\n        <v-btn outlined small class=\"ma-4\" @click=\"setToday\">{{ words[0] }}</v-btn>\n        <v-btn icon @click=\"$refs.calendar.prev()\">\n          <v-icon>{{ words[1] }}</v-icon>\n        </v-btn>\n        <v-btn icon @click=\"$refs.calendar.next()\">\n          <v-icon>{{ words[2] }}</v-icon>\n        </v-btn>\n        <v-toolbar-title>{{ title }}</v-toolbar-title>\n\n        <v-select\n        v-model=\"type\"\n        :items=\"types\"\n        dense\n        outlined\n        hide-details\n        class=\"ma-2\"\n        label=\"type\"\n        ></v-select>\n        </v-sheet>\n        <v-sheet height=\"90vh\" width=\"auto\">\n          <v-calendar\n          ref=\"calendar\"\n          v-model=\"value\"\n          color=\"orange lighten-3\"\n          :type=\"type\"\n          :events=\"events\"\n          :event-color=\"getEventColor\"\n          locale=\"ja-jp\"\n          :day-format=\"(timestamp) => new Date(timestamp.date).getDate()\"\n          :month-format=\"\n            (timestamp) => new Date(timestamp.date).getMonth() + 1 + ' /'\n          \"\n          @change=\"getTaskCal\"\n          @click:event=\"showEvent\"\n          @click:date=\"viewDay\"\n          >\n          </v-calendar>\n        </v-sheet>\n      </v-container>\n\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport MyApi from \"@/common/myApi.js\";\nimport MyEnum from \"@/common/myEnum.js\";\n\n\nexport default {\n  data: () => ({\n    events: [],\n    value: moment().format(\"yyyy-MM-DD\"),\n    type: \"month\",\n    types: [\"month\", \"week\", \"day\"],\n    words:  [\n      \"今日\",\n      \"mdi-chevron-left\",\n      \"mdi-chevron-right\",\n    ],\n\n  }),\n  computed: {\n    title() {\n      return moment(this.value).format(\"yyyy年 M月\");\n    },\n  },\n  methods: {\n\n    getTaskCal: function() {\n      axios({\n        method: \"get\",\n        url: MyApi.apis().taskList,\n        headers: {\n          Authorization: `JWT ${localStorage.getItem(\"JWT\")}`\n        },\n      })\n      .then(response =>{\n        const result = response?.data;\n        const events = [];\n        const mySelf = Number(localStorage.getItem(\"userId\"));\n\n        result.forEach(function(element, index){\n          if (mySelf === result[index].user_name){\n            events[index] = {\n            name: element.task_name,\n            start: element.start_date,\n            end: element.end_date,\n            color: \"blue\",\n            }\n          }\n        })\n        this.events = events;\n      })\n      .catch(function (error){\n        console.log(error);\n      })\n    },\n    setToday() {\n      this.value = moment().format(\"yyyy-MM-DD\");\n    },\n    showEvent({ event }) {\n      alert(`clicked ${event.name}`);\n    },\n    viewDay: function({date}){\n      console.log(date);\n    },\n    getEventColor(event) {\n      return event.color;\n    },\n    tokenCheck: function(){\n      const token = localStorage.getItem(\"JWT\");\n      if (!token){\n        this.$router.push(MyEnum.menuPages().SignIn);\n      }\n    }\n  },\n  mounted: function() {\n    this.tokenCheck();\n  },\n};\n</script>\n\n\n<style>\n#display {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"]}]}