{"remainingRequest":"/Users/tsubasa/project/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tsubasa/project/frontend/src/views/TaskCalendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tsubasa/project/frontend/src/views/TaskCalendar.vue","mtime":1625436134237},{"path":"/Users/tsubasa/project/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tsubasa/project/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tsubasa/project/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tsubasa/project/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IE15QXBpIGZyb20gIkAvY29tbW9uL215QXBpLmpzIjsKaW1wb3J0IE15RW51bSBmcm9tICJAL2NvbW1vbi9teUVudW0uanMiOwoKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgZXZlbnRzOiBbXSwKICAgIHZhbHVlOiBtb21lbnQoKS5mb3JtYXQoInl5eXktTU0tREQiKSwKICAgIHR5cGU6ICJtb250aCIsCiAgICB0eXBlczogWyJtb250aCIsICJ3ZWVrIiwgImRheSJdLAogICAgd29yZHM6ICBbCiAgICAgICLku4rml6UiLAogICAgICAibWRpLWNoZXZyb24tbGVmdCIsCiAgICAgICJtZGktY2hldnJvbi1yaWdodCIsCiAgICBdLAoKICB9KSwKICBjb21wdXRlZDogewogICAgdGl0bGUoKSB7CiAgICAgIHJldHVybiBtb21lbnQodGhpcy52YWx1ZSkuZm9ybWF0KCJ5eXl55bm0IE3mnIgiKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CgogICAgZ2V0VGFza0NhbDogZnVuY3Rpb24oKSB7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHVybDogTXlBcGkuYXBpcygpLnRhc2tMaXN0LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBKV1QgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiSldUIil9YAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+ewogICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlPy5kYXRhOwogICAgICAgIGNvbnN0IGV2ZW50cyA9IFtdOwogICAgICAgIGNvbnN0IG15U2VsZiA9IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIikpOwogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CgogICAgICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4KXsKICAgICAgICAgIC8vIOODpuODvOOCtuODvOiHqui6q+OBruOCv+OCueOCrwogICAgICAgICAgaWYgKG15U2VsZiA9PT0gcmVzdWx0W2luZGV4XS51c2VyX25hbWUpewogICAgICAgICAgICBpZihyZXN1bHRbaW5kZXhdLnByaW9yaXR5ID09PSAi6auY44GEIil7CiAgICAgICAgICAgICAgZXZlbnRzW2luZGV4XSA9IHsKICAgICAgICAgICAgICBuYW1lOiBlbGVtZW50LnRhc2tfbmFtZSwKICAgICAgICAgICAgICBzdGFydDogZWxlbWVudC5zdGFydF9kYXRlLAogICAgICAgICAgICAgIGVuZDogZWxlbWVudC5lbmRfZGF0ZSwKICAgICAgICAgICAgICBjb2xvcjogInJlZCIsCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYocmVzdWx0W2luZGV4XS5wcmlvcml0eSA9PT0gIuS9juOBhCIpewogICAgICAgICAgICAgIGV2ZW50c1tpbmRleF0gPSB7CiAgICAgICAgICAgICAgbmFtZTogZWxlbWVudC50YXNrX25hbWUsCiAgICAgICAgICAgICAgc3RhcnQ6IGVsZW1lbnQuc3RhcnRfZGF0ZSwKICAgICAgICAgICAgICBlbmQ6IGVsZW1lbnQuZW5kX2RhdGUsCiAgICAgICAgICAgICAgY29sb3I6ICJibHVlIiwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICBldmVudHNbaW5kZXhdID0gewogICAgICAgICAgICAgIG5hbWU6IGVsZW1lbnQudGFza19uYW1lLAogICAgICAgICAgICAgIHN0YXJ0OiBlbGVtZW50LnN0YXJ0X2RhdGUsCiAgICAgICAgICAgICAgZW5kOiBlbGVtZW50LmVuZF9kYXRlLAogICAgICAgICAgICAgIGNvbG9yOiAiZ3JleSIsCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmV2ZW50cyA9IGV2ZW50czsKICAgICAgfSkKICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcil7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KQogICAgfSwKICAgIHNldFRvZGF5KCkgewogICAgICB0aGlzLnZhbHVlID0gbW9tZW50KCkuZm9ybWF0KCJ5eXl5LU1NLUREIik7CiAgICB9LAogICAgc2hvd0V2ZW50KHsgZXZlbnQgfSkgewogICAgICBhbGVydChgY2xpY2tlZCAke2V2ZW50Lm5hbWV9YCk7CiAgICB9LAogICAgdmlld0RheTogZnVuY3Rpb24oe2RhdGV9KXsKICAgICAgY29uc29sZS5sb2coZGF0ZSk7CiAgICB9LAogICAgZ2V0RXZlbnRDb2xvcihldmVudCkgewogICAgICByZXR1cm4gZXZlbnQuY29sb3I7CiAgICB9LAogICAgdG9rZW5DaGVjazogZnVuY3Rpb24oKXsKICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiSldUIik7CiAgICAgIGlmICghdG9rZW4pewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKE15RW51bS5tZW51UGFnZXMoKS5TaWduSW4pOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbigpIHsKICAgIHRoaXMudG9rZW5DaGVjaygpOwogIH0sCn07Cg=="},{"version":3,"sources":["TaskCalendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaskCalendar.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <div id=\"display\">\n      <v-container>\n        <v-sheet\n        tile\n        height=\"6vh\"\n        color=\"grey lighten-3\"\n        class=\"d-flex align-center\"\n        >\n        <v-btn outlined small class=\"ma-4\" @click=\"setToday\">{{ words[0] }}</v-btn>\n        <v-btn icon @click=\"$refs.calendar.prev()\">\n          <v-icon>{{ words[1] }}</v-icon>\n        </v-btn>\n        <v-btn icon @click=\"$refs.calendar.next()\">\n          <v-icon>{{ words[2] }}</v-icon>\n        </v-btn>\n        <v-toolbar-title>{{ title }}</v-toolbar-title>\n\n        <v-select\n        v-model=\"type\"\n        :items=\"types\"\n        dense\n        outlined\n        hide-details\n        class=\"ma-2\"\n        label=\"type\"\n        ></v-select>\n        </v-sheet>\n        <v-sheet height=\"90vh\" width=\"auto\">\n          <v-calendar\n          ref=\"calendar\"\n          v-model=\"value\"\n          color=\"orange lighten-3\"\n          :type=\"type\"\n          :events=\"events\"\n          :event-color=\"getEventColor\"\n          locale=\"ja-jp\"\n          :day-format=\"(timestamp) => new Date(timestamp.date).getDate()\"\n          :month-format=\"\n            (timestamp) => new Date(timestamp.date).getMonth() + 1 + ' /'\n          \"\n          @change=\"getTaskCal\"\n          @click:event=\"showEvent\"\n          @click:date=\"viewDay\"\n          >\n          </v-calendar>\n        </v-sheet>\n      </v-container>\n\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport MyApi from \"@/common/myApi.js\";\nimport MyEnum from \"@/common/myEnum.js\";\n\n\nexport default {\n  data: () => ({\n    events: [],\n    value: moment().format(\"yyyy-MM-DD\"),\n    type: \"month\",\n    types: [\"month\", \"week\", \"day\"],\n    words:  [\n      \"今日\",\n      \"mdi-chevron-left\",\n      \"mdi-chevron-right\",\n    ],\n\n  }),\n  computed: {\n    title() {\n      return moment(this.value).format(\"yyyy年 M月\");\n    },\n  },\n  methods: {\n\n    getTaskCal: function() {\n      axios({\n        method: \"get\",\n        url: MyApi.apis().taskList,\n        headers: {\n          Authorization: `JWT ${localStorage.getItem(\"JWT\")}`\n        },\n      })\n      .then(response =>{\n        const result = response?.data;\n        const events = [];\n        const mySelf = Number(localStorage.getItem(\"userId\"));\n        console.log(result);\n\n        result.forEach(function(element, index){\n          // ユーザー自身のタスク\n          if (mySelf === result[index].user_name){\n            if(result[index].priority === \"高い\"){\n              events[index] = {\n              name: element.task_name,\n              start: element.start_date,\n              end: element.end_date,\n              color: \"red\",\n              }\n            }\n            else if(result[index].priority === \"低い\"){\n              events[index] = {\n              name: element.task_name,\n              start: element.start_date,\n              end: element.end_date,\n              color: \"blue\",\n              }\n            }\n            else{\n              events[index] = {\n              name: element.task_name,\n              start: element.start_date,\n              end: element.end_date,\n              color: \"grey\",\n              }\n            }\n            }\n          })\n          this.events = events;\n      })\n      .catch(function (error){\n        console.log(error);\n      })\n    },\n    setToday() {\n      this.value = moment().format(\"yyyy-MM-DD\");\n    },\n    showEvent({ event }) {\n      alert(`clicked ${event.name}`);\n    },\n    viewDay: function({date}){\n      console.log(date);\n    },\n    getEventColor(event) {\n      return event.color;\n    },\n    tokenCheck: function(){\n      const token = localStorage.getItem(\"JWT\");\n      if (!token){\n        this.$router.push(MyEnum.menuPages().SignIn);\n      }\n    }\n  },\n  mounted: function() {\n    this.tokenCheck();\n  },\n};\n</script>\n\n\n<style>\n#display {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"]}]}