{"remainingRequest":"/Users/tsubasa/project/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tsubasa/project/frontend/src/views/TaskCalendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tsubasa/project/frontend/src/views/TaskCalendar.vue","mtime":1625164970189},{"path":"/Users/tsubasa/project/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tsubasa/project/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tsubasa/project/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tsubasa/project/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IE15QXBpIGZyb20gIkAvY29tbW9uL215QXBpLmpzIjsKaW1wb3J0IE15RW51bSBmcm9tICJAL2NvbW1vbi9teUVudW0uanMiOwoKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgZXZlbnRzOiBbXSwKICAgIHZhbHVlOiBtb21lbnQoKS5mb3JtYXQoInl5eXktTU0tREQiKSwKICAgIHR5cGU6ICJtb250aCIsCiAgICB0eXBlczogWyJtb250aCIsICJ3ZWVrIiwgImRheSJdLAogICAgd29yZHM6ICBbCiAgICAgICLku4rml6UiLAogICAgICAibWRpLWNoZXZyb24tbGVmdCIsCiAgICAgICJtZGktY2hldnJvbi1yaWdodCIsCiAgICBdLAoKICB9KSwKICBjb21wdXRlZDogewogICAgdGl0bGUoKSB7CiAgICAgIHJldHVybiBtb21lbnQodGhpcy52YWx1ZSkuZm9ybWF0KCJ5eXl55bm0IE3mnIgiKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CgogICAgZ2V0VGFza0NhbDogZnVuY3Rpb24oKSB7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgIHVybDogTXlBcGkuYXBpcygpLnRhc2tMaXN0LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBKV1QgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiSldUIil9YAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgIC50aGVuKHJlc3BvbnNlID0+ewogICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlPy5kYXRhOwogICAgICAgIGNvbnN0IGV2ZW50cyA9IFtdOwogICAgICAgIGNvbnN0IG15U2VsZiA9IE51bWJlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIikpOwoKICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50LCBpbmRleCl7CiAgICAgICAgICBpZiAobXlTZWxmID09PSByZXN1bHRbaW5kZXhdLnVzZXJfbmFtZSl7CiAgICAgICAgICAgIGV2ZW50c1tpbmRleF0gPSB7CiAgICAgICAgICAgIG5hbWU6IGVsZW1lbnQudGFza19uYW1lLAogICAgICAgICAgICBzdGFydDogZWxlbWVudC5zdGFydF9kYXRlLAogICAgICAgICAgICBlbmQ6IGVsZW1lbnQuZW5kX2RhdGUsCiAgICAgICAgICAgIGNvbG9yOiAiYmx1ZSIsCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHRoaXMuZXZlbnRzID0gZXZlbnRzOwogICAgICB9KQogICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKXsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pCiAgICB9LAogICAgc2V0VG9kYXkoKSB7CiAgICAgIHRoaXMudmFsdWUgPSBtb21lbnQoKS5mb3JtYXQoInl5eXktTU0tREQiKTsKICAgIH0sCiAgICBzaG93RXZlbnQoeyBldmVudCB9KSB7CiAgICAgIGFsZXJ0KGBjbGlja2VkICR7ZXZlbnQubmFtZX1gKTsKICAgIH0sCiAgICB2aWV3RGF5OiBmdW5jdGlvbih7ZGF0ZX0pewogICAgICBjb25zb2xlLmxvZyhkYXRlKTsKICAgIH0sCiAgICBnZXRFdmVudENvbG9yKGV2ZW50KSB7CiAgICAgIHJldHVybiBldmVudC5jb2xvcjsKICAgIH0sCiAgICB0b2tlbkNoZWNrOiBmdW5jdGlvbigpewogICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJKV1QiKTsKICAgICAgaWYgKCF0b2tlbil7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goTXlFbnVtLm1lbnVQYWdlcygpLlNpZ25Jbik7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy50b2tlbkNoZWNrKCk7CiAgfSwKfTsK"},{"version":3,"sources":["TaskCalendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaskCalendar.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-app>\n    <div id=\"display\">\n      <v-container>\n        <v-sheet\n        tile\n        height=\"6vh\"\n        color=\"grey lighten-3\"\n        class=\"d-flex align-center\"\n        >\n        <v-btn outlined small class=\"ma-4\" @click=\"setToday\">{{ words[0] }}</v-btn>\n        <v-btn icon @click=\"$refs.calendar.prev()\">\n          <v-icon>{{ words[1] }}</v-icon>\n        </v-btn>\n        <v-btn icon @click=\"$refs.calendar.next()\">\n          <v-icon>{{ words[2] }}</v-icon>\n        </v-btn>\n        <v-toolbar-title>{{ title }}</v-toolbar-title>\n\n        <v-select\n        v-model=\"type\"\n        :items=\"types\"\n        dense\n        outlined\n        hide-details\n        class=\"ma-2\"\n        label=\"type\"\n        ></v-select>\n        </v-sheet>\n        <v-sheet height=\"90vh\" width=\"auto\">\n          <v-calendar\n          ref=\"calendar\"\n          v-model=\"value\"\n          color=\"orange lighten-3\"\n          :type=\"type\"\n          :events=\"events\"\n          :event-color=\"getEventColor\"\n          locale=\"ja-jp\"\n          :day-format=\"(timestamp) => new Date(timestamp.date).getDate()\"\n          :month-format=\"\n            (timestamp) => new Date(timestamp.date).getMonth() + 1 + ' /'\n          \"\n          @change=\"getTaskCal\"\n          @click:event=\"showEvent\"\n          @click:date=\"viewDay\"\n          >\n          </v-calendar>\n        </v-sheet>\n      </v-container>\n\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport MyApi from \"@/common/myApi.js\";\nimport MyEnum from \"@/common/myEnum.js\";\n\n\nexport default {\n  data: () => ({\n    events: [],\n    value: moment().format(\"yyyy-MM-DD\"),\n    type: \"month\",\n    types: [\"month\", \"week\", \"day\"],\n    words:  [\n      \"今日\",\n      \"mdi-chevron-left\",\n      \"mdi-chevron-right\",\n    ],\n\n  }),\n  computed: {\n    title() {\n      return moment(this.value).format(\"yyyy年 M月\");\n    },\n  },\n  methods: {\n\n    getTaskCal: function() {\n      axios({\n        method: \"get\",\n        url: MyApi.apis().taskList,\n        headers: {\n          Authorization: `JWT ${localStorage.getItem(\"JWT\")}`\n        },\n      })\n      .then(response =>{\n        const result = response?.data;\n        const events = [];\n        const mySelf = Number(localStorage.getItem(\"userId\"));\n\n        result.forEach(function(element, index){\n          if (mySelf === result[index].user_name){\n            events[index] = {\n            name: element.task_name,\n            start: element.start_date,\n            end: element.end_date,\n            color: \"blue\",\n            }\n          }\n        })\n        this.events = events;\n      })\n      .catch(function (error){\n        console.log(error);\n      })\n    },\n    setToday() {\n      this.value = moment().format(\"yyyy-MM-DD\");\n    },\n    showEvent({ event }) {\n      alert(`clicked ${event.name}`);\n    },\n    viewDay: function({date}){\n      console.log(date);\n    },\n    getEventColor(event) {\n      return event.color;\n    },\n    tokenCheck: function(){\n      const token = localStorage.getItem(\"JWT\");\n      if (!token){\n        this.$router.push(MyEnum.menuPages().SignIn);\n      }\n    }\n  },\n  mounted: function() {\n    this.tokenCheck();\n  },\n};\n</script>\n\n\n<style>\n#display {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"]}]}